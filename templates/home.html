<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Fourth Shot</title>
        <!-- Tailwind CSS CDN -->
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="/assets/htmx.min.js"></script>
        <!-- Google Fonts: Inter -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <!-- Custom Styles -->
        <style>
            body {
                font-family: "Inter", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            /* Custom scrollbar for better aesthetics */
            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-track {
                background: #1f2937; /* bg-gray-800 */
            }
            ::-webkit-scrollbar-thumb {
                background: #4b5563; /* bg-gray-600 */
                border-radius: 4px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #6b7280; /* bg-gray-500 */
            }
        </style>
    </head>
    <body class="bg-gray-900 text-white">
        <div class="flex h-screen">
            <!-- Sidebar Navigation -->
            <aside class="w-64 bg-gray-900 border-r border-gray-700/50 p-6 flex-shrink-0 hidden md:flex flex-col">
                <h1 class="text-2xl font-bold text-white mb-12">Fourth Shot</h1>
                <nav class="flex flex-col space-y-2">
                    <a
                        href="#splashes"
                        id="nav-splashes"
                        class="nav-link bg-gray-700/50 text-white px-4 py-2 rounded-lg font-semibold flex items-center space-x-3"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path
                                d="M5 3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2H5zm0 2h10v7.5a1.5 1.5 0 01-1.5 1.5H6.5A1.5 1.5 0 015 12.5V5z"
                            />
                        </svg>
                        <span>Splashes</span>
                    </a>
                    <a
                        href="#creations"
                        id="nav-creations"
                        class="nav-link text-gray-400 hover:bg-gray-800/60 hover:text-white px-4 py-2 rounded-lg font-semibold flex items-center space-x-3"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path
                                fill-rule="evenodd"
                                d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                                clip-rule="evenodd"
                            />
                        </svg>
                        <span>Creations</span>
                    </a>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto">
                <!-- Mobile Header -->
                <header
                    class="md:hidden bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10 p-4 border-b border-gray-700/50 flex justify-between items-center"
                >
                    <h1 class="text-xl font-bold text-white">Fourth Shot</h1>
                    <div class="flex space-x-2">
                        <button id="mobile-nav-splashes" class="p-2 rounded-md bg-gray-700/50 text-white">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    d="M5 3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2H5zm0 2h10v7.5a1.5 1.5 0 01-1.5 1.5H6.5A1.5 1.5 0 015 12.5V5z"
                                />
                            </svg>
                        </button>
                        <button id="mobile-nav-creations" class="p-2 rounded-md text-gray-400">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                        </button>
                    </div>
                </header>

                <!-- Splashes Page -->
                <div id="page-splashes" class="page p-4 md:p-8">
                    <!-- Search and Filter Bar -->
                    <div class="bg-gray-800/50 p-4 rounded-xl mb-8">
                        <div class="flex flex-col md:flex-row gap-4 items-center">
                            <div class="relative flex-grow w-full">
                                <svg
                                    class="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 20 20"
                                    fill="currentColor"
                                >
                                    <path
                                        fill-rule="evenodd"
                                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                        clip-rule="evenodd"
                                    />
                                </svg>
                                <input
                                    type="text"
                                    name="search_term"
                                    placeholder="Search champions, skins..."
                                    class="w-full bg-gray-700/60 border border-transparent focus:border-indigo-500 focus:ring-indigo-500 rounded-lg pl-11 pr-4 py-2.5 transition"
                                    hx-get="/champions"
                                    hx-trigger="keyup"
                                    hx-target="#champions-grid"
                                    hx-indicator="#loading-champions"
                                    hx-include="[name='sort_by'], [name='sort_order'], [name='search_term']"
                                />
                            </div>
                            <div
                                class="flex items-center gap-4 w-full md:w-auto"
                                hx-get="/champions"
                                hx-trigger="change"
                                hx-target="#champions-grid"
                                hx-indicator="#loading-champions"
                                hx-include="[name='sort_by'], [name='sort_order'], [name='search_term']"
                            >
                                <div class="bg-gray-700/60 rounded-lg px-4 py-2.5">Sort By: Name</div>
                                <input type="hidden" name="sort_by" value="name" />
                                <input type="hidden" id="sort-order" name="sort_order" value="desc" />
                                <button
                                    id="sort-direction-btn"
                                    type="button"
                                    class="p-2.5 bg-gray-700/60 border border-transparent hover:border-indigo-500 rounded-lg transition"
                                >
                                    <svg
                                        id="icon-desc"
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="h-5 w-5"
                                        viewBox="0 0 20 20"
                                        fill="currentColor"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd"
                                        />
                                    </svg>
                                    <svg
                                        id="icon-asc"
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="h-5 w-5 hidden"
                                        viewBox="0 0 20 20"
                                        fill="currentColor"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                                            clip-rule="evenodd"
                                        />
                                    </svg>
                                </button>
                                <select
                                    class="bg-gray-700/60 border border-transparent focus:border-indigo-500 focus:ring-indigo-500 rounded-lg px-4 py-2.5 transition"
                                >
                                    <option>Filter: Role</option>
                                    <option>Fighter</option>
                                    <option>Mage</option>
                                    <option>Assassin</option>
                                    <option>Marksman</option>
                                    <option>Support</option>
                                    <option>Tank</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Champions Section -->
                    <section class="mb-12">
                        <h2 class="text-2xl font-bold mb-6">Champions</h2>
                        <div
                            id="champions-grid"
                            hx-get="/champions"
                            hx-trigger="load"
                            hx-indicator="#loading-champions"
                            hx-include="[name='sort_by'], [name='sort_order'], [name='search_term']"
                        ></div>
                        <div id="loading-champions" class="htmx-indicator text-center py-8">
                            <div class="text-gray-400">Loading champions...</div>
                        </div>
                    </section>

                    <!-- Skin Lines Section -->
                    <section>
                        <h2 class="text-2xl font-bold mb-6">Skin Lines</h2>
                        <div
                            id="skin-lines-grid"
                            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
                        >
                            <!-- Skin line cards will be injected here by JS -->
                        </div>
                    </section>
                </div>

                <!-- Creations Page -->
                <div id="page-creations" class="page p-4 md:p-8 hidden">
                    <!-- Search and Filter Bar -->
                    <div class="bg-gray-800/50 p-4 rounded-xl mb-8">
                        <div class="flex flex-col md:flex-row gap-4 items-center">
                            <div class="relative flex-grow w-full">
                                <svg
                                    class="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 20 20"
                                    fill="currentColor"
                                >
                                    <path
                                        fill-rule="evenodd"
                                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                        clip-rule="evenodd"
                                    />
                                </svg>
                                <input
                                    type="text"
                                    placeholder="Search your creations..."
                                    class="w-full bg-gray-700/60 border border-transparent focus:border-indigo-500 focus:ring-indigo-500 rounded-lg pl-11 pr-4 py-2.5 transition"
                                />
                            </div>
                            <div class="flex items-center gap-4 w-full md:w-auto">
                                <select
                                    class="bg-gray-700/60 border border-transparent focus:border-indigo-500 focus:ring-indigo-500 rounded-lg px-4 py-2.5 transition"
                                >
                                    <option>Sort By: Date Created</option>
                                    <option>Sort By: Name</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Creations Grid -->
                    <div
                        id="creations-grid"
                        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
                    >
                        <!-- User creations will be injected here -->
                    </div>
                </div>
                <footer class="text-center p-4 text-gray-500 text-sm">
                    Built for fun. Not affiliated with Riot Games.
                </footer>
            </main>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                // --- MOCK DATA ---

                const skinLines = [
                    {
                        title: "PROJECT",
                        champions: ["Ashe", "Ekko", "Fiora", "Jhin", "Yasuo"],
                        colors: ["#00e5ff", "#ff003c", "#a6ff00"],
                        release: 2015,
                        imageUrl: "https://placehold.co/600x400/1a202c/00e5ff?text=PROJECT",
                    },
                    {
                        title: "Star Guardian",
                        champions: ["Lux", "Ahri", "Zoe", "Kai'Sa"],
                        colors: ["#ff66d9", "#ffcc00", "#66ffff"],
                        release: 2016,
                        imageUrl: "https://placehold.co/600x400/1a202c/ff66d9?text=Star+Guardian",
                    },
                    {
                        title: "K/DA",
                        champions: ["Ahri", "Akali", "Evelynn", "Kai'Sa", "Seraphine"],
                        colors: ["#b456ff", "#fff", "#ffd700"],
                        release: 2018,
                        imageUrl: "https://placehold.co/600x400/1a202c/b456ff?text=K/DA",
                    },
                    {
                        title: "High Noon",
                        champions: ["Jhin", "Yasuo", "Ashe", "Darius"],
                        colors: ["#ff4500", "#4a2c00", "#ffab40"],
                        release: 2018,
                        imageUrl: "https://placehold.co/600x400/1a202c/ff4500?text=High+Noon",
                    },
                    {
                        title: "Blood Moon",
                        champions: ["Jhin", "Yasuo", "Akali", "Thresh", "Diana"],
                        colors: ["#cc0000", "#2e2e2e", "#ffffff"],
                        release: 2012,
                        imageUrl: "https://placehold.co/600x400/1a202c/cc0000?text=Blood+Moon",
                    },
                    {
                        title: "Spirit Blossom",
                        champions: ["Thresh", "Yasuo", "Yone", "Ahri", "Kindred"],
                        colors: ["#ffb3de", "#8be9fd", "#a7a0ff"],
                        release: 2020,
                        imageUrl: "https://placehold.co/600x400/1a202c/ffb3de?text=Spirit+Blossom",
                    },
                ];

                const creations = [
                    {
                        id: 1,
                        name: "Jhin vs. Zed",
                        imageUrl: "https://placehold.co/600x800/2d3748/ffffff?text=Creation+1",
                    },
                    {
                        id: 2,
                        name: "K/DA Stage Mix",
                        imageUrl: "https://placehold.co/600x800/2d3748/ffffff?text=Creation+2",
                    },
                    {
                        id: 3,
                        name: "PROJECT Dystopia",
                        imageUrl: "https://placehold.co/600x800/2d3748/ffffff?text=Creation+3",
                    },
                    {
                        id: 4,
                        name: "Ashe's Journey",
                        imageUrl: "https://placehold.co/600x800/2d3748/ffffff?text=Creation+4",
                    },
                    {
                        id: 5,
                        name: "Ionian Peace",
                        imageUrl: "https://placehold.co/600x800/2d3748/ffffff?text=Creation+5",
                    },
                    {
                        id: 6,
                        name: "Demacian Light",
                        imageUrl: "https://placehold.co/600x800/2d3748/ffffff?text=Creation+6",
                    },
                ];

                // --- DOM Elements ---
                const championsGrid = document.getElementById("champions-grid");
                const skinLinesGrid = document.getElementById("skin-lines-grid");
                const creationsGrid = document.getElementById("creations-grid");
                const sortDirectionBtn = document.getElementById("sort-direction-btn");
                const sortOrderInput = document.getElementById("sort-order");
                const iconAsc = document.getElementById("icon-asc");
                const iconDesc = document.getElementById("icon-desc");

                // Navigation Elements
                const navLinks = document.querySelectorAll(".nav-link");
                const mobileNavButtons = [
                    document.getElementById("mobile-nav-splashes"),
                    document.getElementById("mobile-nav-creations"),
                ];
                const pages = document.querySelectorAll(".page");
                const navSplashes = document.getElementById("nav-splashes");
                const navCreations = document.getElementById("nav-creations");

                // --- SORTING LOGIC ---
                sortDirectionBtn.addEventListener("click", () => {
                    const currentOrder = sortOrderInput.value;
                    const newOrder = currentOrder === "asc" ? "desc" : "asc";
                    sortOrderInput.value = newOrder;

                    // Update icon visibility
                    iconAsc.classList.toggle("hidden", newOrder === "asc");
                    iconDesc.classList.toggle("hidden", newOrder === "desc");

                    // Manually trigger htmx request on the parent container
                    htmx.trigger(sortDirectionBtn.parentElement, "change");
                });

                // --- RENDER FUNCTIONS ---

                // Champions are now loaded via HTMX

                // Function to render skin line cards
                function renderSkinLines() {
                    skinLinesGrid.innerHTML = skinLines
                        .map(
                            (line) => `
                    <div class="bg-gray-800/70 rounded-xl overflow-hidden group transform transition duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-indigo-500/20">
                        <div class="h-40 bg-cover bg-center" style="background-image: url('${line.imageUrl}')"></div>
                        <div class="p-5">
                            <h3 class="text-xl font-bold mb-2">${line.title}</h3>
                            <div class="mb-4">
                                <p class="text-sm font-semibold text-gray-400 mb-1">Champions:</p>
                                <p class="text-sm text-gray-300">${line.champions.join(", ")}</p>
                            </div>
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-sm font-semibold text-gray-400 mb-1">Primary Colors:</p>
                                    <div class="flex space-x-2">
                                        ${line.colors.map((color) => `<div class="w-5 h-5 rounded-full border-2 border-gray-700" style="background-color: ${color};"></div>`).join("")}
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-semibold text-gray-400 mb-1">Released</p>
                                    <p class="font-bold text-lg">${line.release}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                        )
                        .join("");
                }

                // Function to render user creations
                function renderCreations() {
                    creationsGrid.innerHTML = creations
                        .map(
                            (creation) => `
                    <div class="group relative rounded-xl overflow-hidden cursor-pointer">
                        <img src="${creation.imageUrl}" alt="${creation.name}" class="w-full h-full object-cover transform transition duration-500 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
                        <h3 class="absolute bottom-0 left-0 p-4 text-lg font-bold">${creation.name}</h3>
                    </div>
                `,
                        )
                        .join("");
                }

                // --- NAVIGATION LOGIC ---
                function switchPage(pageId) {
                    // Hide all pages
                    pages.forEach((page) => page.classList.add("hidden"));
                    // Show the target page
                    document.getElementById(pageId).classList.remove("hidden");

                    // Update desktop nav link styles
                    navLinks.forEach((link) => {
                        const isActive = link.getAttribute("href") === `#${pageId.split("-")[1]}`;
                        link.classList.toggle("bg-gray-700/50", isActive);
                        link.classList.toggle("text-white", isActive);
                        link.classList.toggle("text-gray-400", !isActive);
                        link.classList.toggle("hover:bg-gray-800/60", !isActive);
                    });

                    // Update mobile nav button styles
                    mobileNavButtons.forEach((button) => {
                        const isActive = button.id === `mobile-nav-${pageId.split("-")[1]}`;
                        button.classList.toggle("bg-gray-700/50", isActive);
                        button.classList.toggle("text-white", isActive);
                        button.classList.toggle("text-gray-400", !isActive);
                    });
                }

                // Event Listeners for Desktop Nav
                navSplashes.addEventListener("click", (e) => {
                    e.preventDefault();
                    switchPage("page-splashes");
                });

                navCreations.addEventListener("click", (e) => {
                    e.preventDefault();
                    switchPage("page-creations");
                });

                // Event Listeners for Mobile Nav
                mobileNavButtons[0].addEventListener("click", (e) => {
                    e.preventDefault();
                    switchPage("page-splashes");
                });
                mobileNavButtons[1].addEventListener("click", (e) => {
                    e.preventDefault();
                    switchPage("page-creations");
                });

                // --- INITIALIZATION ---
                renderSkinLines();
                renderCreations();

                // Set initial page based on hash or default to splashes
                const initialPage = window.location.hash === "#creations" ? "page-creations" : "page-splashes";
                switchPage(initialPage);
            });
        </script>
    </body>
</html>
